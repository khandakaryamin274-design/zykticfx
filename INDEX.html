<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ZYKTIC.FX</title>
    <style>
        :root {
            --bg-color: #121212; /* Dark background */
            --surface-color: rgba(255, 255, 255, 0.1); /* Glass surface */
            --primary-text-color: #f0f0f0;
            --secondary-text-color: #a0a0a0;
            --border-color: rgba(255, 255, 255, 0.2);
            --shadow-color: rgba(0, 0, 0, 0.2);
            --accent-color: #ffffff; /* White for buttons */
            --success-color: #34c759; /* iOS-style green */
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
            line-height: 1.6;
            margin: 0;
            background-color: var(--bg-color);
            color: var(--primary-text-color);
            /* Subtle gradient background */
            background-image: 
                radial-gradient(at 47% 33%, hsl(162.00, 77%, 20%) 0, transparent 59%), 
                radial-gradient(at 82% 65%, hsl(218.00, 39%, 11%) 0, transparent 55%);
        }

        .container {
            max-width: 1200px;
            margin: 2rem auto;
            padding: 0 1rem;
        }

        header {
            padding: 1rem 0;
            text-align: center;
            /* Glass effect for header */
            background-color: rgba(0, 0, 0, 0.3);
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
            border-bottom: 1px solid var(--border-color);
        }

        header h1 {
            margin: 0;
            font-weight: 300;
            letter-spacing: 1px;
        }

        nav {
            padding: 0.5rem;
            text-align: center;
            background-color: rgba(0, 0, 0, 0.2);
            backdrop-filter: blur(5px);
            -webkit-backdrop-filter: blur(5px);
        }

        nav a {
            color: var(--primary-text-color);
            text-decoration: none;
            padding: 0.5rem 1rem;
            display: inline-block;
            border-radius: 8px;
            transition: background-color 0.3s ease;
        }

        nav a:hover {
            background-color: var(--surface-color);
        }

        .view {
            display: none;
            /* Core Glassmorphism styles */
            background-color: var(--surface-color);
            backdrop-filter: blur(15px);
            -webkit-backdrop-filter: blur(15px);
            border-radius: 16px;
            border: 1px solid var(--border-color);
            box-shadow: 0 8px 32px 0 var(--shadow-color);
            padding: 2rem;
        }

        .view.active {
            display: block;
        }

        .product-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 2rem;
        }

        .product-card {
            /* Glass effect for cards */
            background-color: rgba(255, 255, 255, 0.05);
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
            border-radius: 16px;
            border: 1px solid var(--border-color);
            overflow: hidden;
            text-align: center;
            box-shadow: 0 4px 16px 0 rgba(0, 0, 0, 0.1);
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }
        .product-card:hover {
            transform: translateY(-8px);
            box-shadow: 0 12px 24px 0 rgba(0, 0, 0, 0.2);
        }
        .product-card .image-container {
            width: 100%;
            padding-top: 100%; /* 1:1 Aspect Ratio */
            position: relative;
            overflow: hidden;
        }
        .product-card img {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            object-fit: cover;
        }
        .product-card .content {
            padding: 1.5rem;
        }
        .product-card h3 {
            margin: 0 0 0.5rem;
            font-weight: 500;
        }
        .product-card p {
            color: var(--secondary-text-color);
            margin-bottom: 1.5rem;
            font-size: 0.9rem;
        }

        .btn {
            display: inline-block;
            background-color: var(--accent-color);
            color: var(--bg-color); /* Dark text on white button */
            padding: 0.8rem 1.5rem;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            text-decoration: none;
            font-size: 1rem;
            font-weight: 500;
            transition: opacity 0.3s ease, transform 0.2s ease;
        }
        .btn:hover {
            opacity: 0.9;
            transform: scale(1.05);
        }
        .btn-success {
            background-color: var(--success-color);
            color: #fff;
        }
        .btn-close {
            background: none;
            color: var(--secondary-text-color);
            font-size: 1.5rem;
            position: absolute;
            top: 15px;
            right: 20px;
        }
        .btn-close:hover {
            color: var(--primary-text-color);
        }

        form {
            display: flex;
            flex-direction: column;
            gap: 1.5rem;
            max-width: 400px;
            margin: auto;
        }

        form input, form textarea {
            padding: 1rem;
            /* Glass effect for form inputs */
            background-color: rgba(255, 255, 255, 0.05);
            border: 1px solid var(--border-color);
            border-radius: 8px;
            font-size: 1rem;
            color: var(--primary-text-color);
            transition: border-color 0.3s ease;
        }
        form input:focus, form textarea:focus {
            outline: none;
            border-color: var(--accent-color);
        }
        form input::placeholder {
            color: var(--secondary-text-color);
        }

        /* Improved Search Bar Styles */
        .search-wrapper {
            max-width: 600px;
            margin: 2rem auto;
            padding: 0 1rem;
        }

        .search-container {
            position: relative;
            display: flex;
            align-items: center;
            /* Enhanced glass effect for the search container */
            background-color: rgba(255, 255, 255, 0.08);
            border-radius: 50px; /* Pill shape */
            border: 1px solid var(--border-color);
            box-shadow: 0 4px 20px 0 rgba(0, 0, 0, 0.15);
            transition: box-shadow 0.3s ease, border-color 0.3s ease;
        }
        .search-container:hover, .search-container:focus-within {
            box-shadow: 0 6px 30px 0 rgba(0, 0, 0, 0.25);
            border-color: var(--accent-color);
        }

        .search-input {
            width: 100%;
            padding: 1rem 4.5rem 1rem 1.5rem; /* Adjusted padding for icon */
            background: transparent; /* Make input background transparent */
            border: none; /* Remove default border */
            border-radius: 50px; /* Match container's border-radius */
            font-size: 1rem;
            color: var(--primary-text-color);
            outline: none; /* Remove default outline */
        }
        .search-input::placeholder {
            color: var(--secondary-text-color);
        }

        .search-icon {
            position: absolute;
            right: 1.5rem; /* Moved to the right */
            top: 50%;
            transform: translateY(-50%);
            color: var(--secondary-text-color);
            pointer-events: none; /* Prevents icon from blocking clicks */
        }

        .search-results-info {
            text-align: center;
            margin-top: 1rem;
            color: var(--secondary-text-color);
            font-size: 0.9rem;
        }

        /* Modal Styles */
        .modal {
            display: none; /* Hidden by default */
            position: fixed;
            z-index: 1000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            overflow: auto;
            background-color: rgba(0, 0, 0, 0.7); /* Darker overlay */
            justify-content: center;
            align-items: center;
        }

        .modal-content {
            /* Glass effect for modal */
            background-color: var(--surface-color);
            backdrop-filter: blur(20px);
            -webkit-backdrop-filter: blur(20px);
            border: 1px solid var(--border-color);
            border-radius: 16px;
            padding: 2rem;
            width: 80%;
            max-width: 400px;
            text-align: center;
            position: relative;
            box-shadow: 0 8px 32px 0 var(--shadow-color);
        }

        .notification {
            padding: 1rem;
            margin-bottom: 1rem;
            border-radius: 8px;
            color: #fff;
            /* Solid background for notifications to stand out */
            background-color: rgba(0, 0, 0, 0.5);
            backdrop-filter: blur(5px);
        }
        .notification.success { background-color: var(--success-color); }
        .notification.error { background-color: #ff3b30; /* iOS-style red */ }
    </style>
</head>
<body>

    <header>
        <h1>ZYKTIC STORE</h1>
    </header>

    <nav id="navbar">
        <!-- Navigation will be dynamically inserted here -->
    </nav>

    <main class="container">
        <!-- Notification Area -->
        <div id="notification-area"></div>

        <!-- Landing Page / Storefront -->
        <div id="landing-view" class="view active">
            <!-- Improved Search Bar -->
            <div class="search-wrapper">
                <div class="search-container">
                    <input type="text" id="search-input" class="search-input" placeholder="Search for products...">
                    <svg class="search-icon" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                        <circle cx="11" cy="11" r="8"></circle>
                        <path d="m21 21-4.35-4.35"></path>
                    </svg>
                </div>
            </div>
            
            <div id="search-results-info" class="search-results-info"></div>
            
            <div id="product-list" class="product-grid">
                <!-- Products will be dynamically inserted here -->
            </div>
        </div>

        <!-- Login/Register View -->
        <div id="auth-view" class="view">
            <div id="login-form">
                <h2>Login to Download</h2>
                <form id="loginForm">
                    <input type="email" id="login-email" placeholder="Email" required>
                    <input type="password" id="login-password" placeholder="Password" required>
                    <button type="submit" class="btn">Login</button>
                </form>
                <p>Don't have an account? <a href="#" id="show-register-link">Register here</a></p>
            </div>
            <div id="register-form" style="display:none;">
                <h2>Register</h2>
                <form id="registerForm">
                    <input type="text" id="register-name" placeholder="Full Name" required>
                    <input type="email" id="register-email" placeholder="Email" required>
                    <input type="password" id="register-password" placeholder="Password" required>
                    <button type="submit" class="btn">Register</button>
                </form>
                <p>Already have an account? <a href="#" id="show-login-link">Login here</a></p>
            </div>
        </div>
    </main>

    <!-- The Download Modal -->
    <div id="downloadModal" class="modal">
        <div class="modal-content">
            <button class="btn-close" id="modal-close-btn">&times;</button>
            <h2>Preparing Your Download</h2>
            <p id="countdown-text">Please wait <span id="countdown">5</span> seconds...</p>
            <a id="download-link" href="#" class="btn btn-success" style="display:none;" target="_blank">Download Now</a>
        </div>
    </div>

<script>
document.addEventListener('DOMContentLoaded', () => {
    // --- STATE MANAGEMENT ---
    const DB_NAME = 'digitalDownloadsStoreDB';
    let db = {
        products: [],
        users: [],
        currentUser: null
    };

    // --- INITIALIZATION ---
    function initializeApp() {
        loadFromLocalStorage();
        if (db.users.length === 0) {
            setupDefaultData();
        }
        updateUI();
    }

    function loadFromLocalStorage() {
        const storedDb = localStorage.getItem(DB_NAME);
        if (storedDb) {
            db = JSON.parse(storedDb);
        }
    }

    function saveToLocalStorage() {
        localStorage.setItem(DB_NAME, JSON.stringify(db));
    }

    function setupDefaultData() {
        db.users = [
            { id: 1, name: 'Regular User', email: 'user@example.com', password: 'user123' }
        ];
        db.products = [
            { id: 1, name: 'E-book: Digital Marketing', description: 'Learn the basics of digital marketing in this comprehensive guide.', imageUrl: 'https://via.placeholder.com/1080x1080.png?text=E-book', fileUrl: '#' },
            { id: 2, name: 'Icon Pack', description: 'A set of 100 high-quality, free-to-use icons for your next project.', imageUrl: 'https://via.placeholder.com/1080x1080.png?text=Icons', fileUrl: '#' },
            { id: 3, name: 'Lightroom Presets', description: '5 professional Lightroom presets to enhance your photos instantly.', imageUrl: 'https://via.placeholder.com/1080x1080.png?text=Presets', fileUrl: '#' }
        ];
        saveToLocalStorage();
    }

    // --- UI RENDERING ---
    function showView(viewId) {
        document.querySelectorAll('.view').forEach(view => view.classList.remove('active'));
        document.getElementById(`${viewId}-view`).classList.add('active');
    }

    function updateUI() {
        renderNavbar();
        renderProducts(); // Initial render without search query
    }

    function renderNavbar() {
        const navbar = document.getElementById('navbar');
        let html = `<a href="#" data-view="landing">Store</a>`;
        
        if (db.currentUser) {
            html += `<a href="#" data-action="logout">Logout (${db.currentUser.name})</a>`;
        } else {
            html += `<a href="#" data-view="auth">Login / Register</a>`;
        }
        navbar.innerHTML = html;
    }

    function renderProducts(searchQuery = '') {
        const productList = document.getElementById('product-list');
        const searchResultsInfo = document.getElementById('search-results-info');
        
        if (!productList) return;
        
        let filteredProducts = db.products;
        
        // If there's a search query, filter the products
        if (searchQuery) {
            const query = searchQuery.toLowerCase();
            filteredProducts = db.products.filter(product => 
                product.name.toLowerCase().includes(query) || 
                product.description.toLowerCase().includes(query)
            );
            
            // Update search results info
            if (filteredProducts.length === 0) {
                searchResultsInfo.textContent = `No results found for "${searchQuery}"`;
            } else {
                searchResultsInfo.textContent = `Found ${filteredProducts.length} result${filteredProducts.length === 1 ? '' : 's'} for "${searchQuery}"`;
            }
        } else {
            searchResultsInfo.textContent = '';
        }
        
        if (filteredProducts.length === 0) {
            productList.innerHTML = '<p>No products available at the moment. Please check back later.</p>';
            return;
        }
        
        productList.innerHTML = filteredProducts.map(product => `
            <div class="product-card">
                <div class="image-container">
                    <img src="${product.imageUrl}" alt="${product.name}">
                </div>
                <div class="content">
                    <h3>${product.name}</h3>
                    <p>${product.description}</p>
                    <button class="btn download-btn" data-product-id="${product.id}" data-file-url="${product.fileUrl}">Download</button>
                </div>
            </div>
        `).join('');
    }
    
    // --- EVENT HANDLERS ---
    function handleNavClick(event) {
        event.preventDefault();
        const view = event.target.dataset.view;
        const action = event.target.dataset.action;

        if (action === 'logout') {
            handleLogout();
        } else if (view) {
            if (view === 'auth') {
                showView('auth');
            } else if (db.currentUser) {
                showView(view);
            } else {
                showNotification('Please log in to view this page.', 'error');
                showView('auth');
            }
        }
    }

    function handleLogin(event) {
        event.preventDefault();
        const email = document.getElementById('login-email').value;
        const password = document.getElementById('login-password').value;

        const user = db.users.find(u => u.email === email && u.password === password);

        if (user) {
            db.currentUser = user;
            saveToLocalStorage();
            showNotification(`Welcome back, ${user.name}!`, 'success');
            updateUI();
            showView('landing');
        } else {
            showNotification('Invalid email or password.', 'error');
        }
    }

    function handleRegister(event) {
        event.preventDefault();
        const name = document.getElementById('register-name').value;
        const email = document.getElementById('register-email').value;
        const password = document.getElementById('register-password').value;

        if (db.users.some(u => u.email === email)) {
            showNotification('An account with this email already exists.', 'error');
            return;
        }

        const newUser = {
            id: Date.now(),
            name,
            email,
            password
        };

        db.users.push(newUser);
        saveToLocalStorage();
        showNotification('Registration successful! Please log in.', 'success');
        document.getElementById('register-form').style.display = 'none';
        document.getElementById('login-form').style.display = 'block';
    }

    function handleLogout() {
        db.currentUser = null;
        saveToLocalStorage();
        showNotification('You have been logged out.', 'success');
        updateUI();
        showView('landing');
    }

    function showNotification(message, type = 'success') {
        const area = document.getElementById('notification-area');
        const notification = document.createElement('div');
        notification.className = `notification ${type}`;
        notification.textContent = message;
        area.appendChild(notification);
        setTimeout(() => notification.remove(), 4000);
    }

    // --- DOWNLOAD MODAL LOGIC ---
    let countdownInterval;

    function showDownloadModal(fileUrl) {
        if (!db.currentUser) {
            showNotification('Please log in to download this file.', 'error');
            showView('auth');
            return;
        }

        const modal = document.getElementById('downloadModal');
        const countdownText = document.getElementById('countdown-text');
        const countdownNumber = document.getElementById('countdown');
        const downloadLink = document.getElementById('download-link');

        // Reset modal state
        modal.style.display = 'flex';
        countdownText.style.display = 'block';
        downloadLink.style.display = 'none';
        countdownNumber.textContent = '5';
        
        // Clear any existing interval
        if (countdownInterval) {
            clearInterval(countdownInterval);
        }

        let timeLeft = 5;
        countdownInterval = setInterval(() => {
            timeLeft--;
            countdownNumber.textContent = timeLeft;
            if (timeLeft <= 0) {
                clearInterval(countdownInterval);
                countdownText.style.display = 'none';
                downloadLink.style.display = 'inline-block';
                downloadLink.href = fileUrl; // Set the download link
            }
        }, 1000);
    }

    function closeDownloadModal() {
        const modal = document.getElementById('downloadModal');
        modal.style.display = 'none';
        if (countdownInterval) {
            clearInterval(countdownInterval);
        }
    }

    // --- SEARCH FUNCTIONALITY ---
    function handleSearch(event) {
        const searchQuery = event.target.value;
        renderProducts(searchQuery);
    }

    // --- EVENT LISTENERS ---
    document.getElementById('navbar').addEventListener('click', handleNavClick);
    document.getElementById('loginForm').addEventListener('submit', handleLogin);
    document.getElementById('registerForm').addEventListener('submit', handleRegister);
    document.getElementById('modal-close-btn').addEventListener('click', closeDownloadModal);
    document.getElementById('search-input').addEventListener('input', handleSearch);
    
    // Event delegation for download buttons
    document.getElementById('product-list').addEventListener('click', (event) => {
        if (event.target.classList.contains('download-btn')) {
            const fileUrl = event.target.dataset.fileUrl;
            showDownloadModal(fileUrl);
        }
    });

    document.getElementById('show-register-link').addEventListener('click', (e) => {
        e.preventDefault();
        document.getElementById('login-form').style.display = 'none';
        document.getElementById('register-form').style.display = 'block';
    });

    document.getElementById('show-login-link').addEventListener('click', (e) => {
        e.preventDefault();
        document.getElementById('register-form').style.display = 'none';
        document.getElementById('login-form').style.display = 'block';
    });

    // --- INITIALIZE ---
    initializeApp();
});
</script>

</body>
</html>